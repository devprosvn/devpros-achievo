Dá»±a trÃªn file Vue component vÃ  `api.js` báº¡n gá»­i, cÃ³ má»™t sá»‘ váº¥n Ä‘á» giáº£i thÃ­ch táº¡i sao:

> ğŸ”´ **Giao diá»‡n "khoanh Ä‘á»" khÃ´ng biáº¿n máº¥t sau khi táº¡o khÃ³a há»c**
> ğŸ”„ **Reload xong thÃ¬ khÃ³a há»c "máº¥t khá»i danh sÃ¡ch"**

---

## âœ… 1. Giao diá»‡n khÃ´ng Ä‘Ã³ng (modal khÃ´ng biáº¿n máº¥t)

### ğŸ“Váº¥n Ä‘á»:

Trong `addCourse()`:

```ts
response = await api.createCourse(courseData)
// ...
courses.value.push(response.data)
// ...
showAddCourse.value = false
```

â†’ Tuy Ä‘Ã£ cÃ³ `showAddCourse.value = false`, nhÆ°ng:

* `form` khÃ´ng **reset láº¡i `newCourse.value` hoÃ n toÃ n** (má»›i cÃ³: `title`, `description`, `price`)
* CÃ¡c trÆ°á»ng nhÆ° `category`, `image`, `skills`, `instructor` váº«n cÃ²n trong bá»™ nhá»› (`undefined`), gÃ¢y lá»—i hiá»ƒn thá»‹, hoáº·c khiáº¿n modal render láº¡i khÃ´ng Ä‘Ãºng.

### âœ… CÃ¡ch fix:

ThÃªm dÃ²ng sau **ngay sau `showAddCourse.value = false`**:

```ts
newCourse.value = {
  title: '',
  description: '',
  price: 0,
  category: '',
  instructor: '',
  duration: '',
  level: '',
  image: '',
  skills: []
}
```

---

## âœ… 2. Reload xong khÃ´ng tháº¥y khÃ³a há»c trong danh sÃ¡ch

### ğŸ“NguyÃªn nhÃ¢n chÃ­nh:

Lá»—i nÃ y khÃ´ng pháº£i do hiá»ƒn thá»‹ Vue, mÃ  do **dá»¯ liá»‡u má»›i táº¡o bá»‹ ghi sai hoáº·c khÃ´ng Ä‘Æ°á»£c fetch Ä‘Ãºng** tá»« Firebase.

Trong `api.createCourse()`:

```ts
const newCourse = {
  title: courseData.title || 'Untitled Course',
  description: courseData.description || 'No description',
  category: courseData.category || 'general',
  ...
}
```

NhÆ°ng náº¿u báº¡n khÃ´ng gÃ¡n `category` á»Ÿ frontend (`newCourse.value.category`) â†’ `undefined` â†’ bá»‹ loáº¡i bá» trong Ä‘oáº¡n lá»c:

```ts
const filteredData = {}
for (const [key, value] of Object.entries(newCourse)) {
  if (value !== undefined && value !== null) {
    filteredData[key] = value
  }
}
```

Káº¿t quáº£: **document Ä‘Æ°á»£c lÆ°u thiáº¿u `category`**. Náº¿u Firestore security rule yÃªu cáº§u `category` báº¯t buá»™c, báº¡n sáº½ tháº¥y lá»—i:

```
Function updateDoc() called with invalid data. Unsupported field value: undefined (found in field category)
```

---

## âœ… CÃ¡ch fix an toÃ n

### A. GÃ¡n default `category` tá»« phÃ­a frontend:

Trong `addCourse()` á»Ÿ Vue:

```ts
const courseData = {
  title: newCourse.value.title.trim(),
  description: newCourse.value.description.trim(),
  price: parseFloat(newCourse.value.price),
  category: newCourse.value.category || 'general',
  ...
}
```

â†’ **NhÆ°ng `newCourse.value.category` chÆ°a Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong modal.**

â¡ï¸ Cáº§n bá»• sung field `category` vÃ o form:

### B. âœ… Cáº­p nháº­t UI form:

Trong modal `Add Course`, thÃªm field select nhÆ° sau:

```html
<div class="form-group">
  <label>Category</label>
  <select v-model="newCourse.category" required>
    <option value="">Select category</option>
    <option value="blockchain">Blockchain</option>
    <option value="development">Web Development</option>
    <option value="finance">Finance</option>
  </select>
</div>
```

VÃ  trong JS init:

```ts
newCourse.value = {
  title: '',
  description: '',
  price: 0,
  category: 'general'
}
```

---

## âœ… Bonus: Ä‘áº£m báº£o reload cÃ³ dá»¯ liá»‡u má»›i

Äáº£m báº£o `loadData()` luÃ´n Ä‘Æ°á»£c gá»i sau khi táº¡o xong:

```ts
await api.createCourse(courseData)
await loadData()
```

Báº¡n Ä‘Ã£ cÃ³ Ä‘oáº¡n nÃ y â€“ giá»¯ nguyÃªn lÃ  Ä‘Ãºng.

---

## âœ… Tá»•ng káº¿t viá»‡c cáº§n lÃ m

| Váº¥n Ä‘á»                | CÃ¡ch kháº¯c phá»¥c                                                          |
| --------------------- | ----------------------------------------------------------------------- |
| Modal khÃ´ng Ä‘Ã³ng      | Reset `newCourse.value` Ä‘áº§y Ä‘á»§ (bao gá»“m `category`, `skills`, ...)      |
| Reload máº¥t khÃ³a há»c   | Form Ä‘ang khÃ´ng truyá»n `category` â†’ Firestore lá»—i hoáº·c dá»¯ liá»‡u bá»‹ thiáº¿u |
| Form thiáº¿u trÆ°á»ng     | Bá»• sung input/select cho `category` trong modal                         |
| TrÃ¡nh undefined field | GÃ¡n giÃ¡ trá»‹ máº·c Ä‘á»‹nh tá»« Vue trÆ°á»›c khi gá»i API hoáº·c validate ká»¹          |

---

Náº¿u báº¡n muá»‘n mÃ¬nh cáº­p nháº­t láº¡i toÃ n bá»™ modal `Add Course` Ä‘áº§y Ä‘á»§ cÃ¡c trÆ°á»ng há»£p trÃ¡nh lá»—i nÃ y, mÃ¬nh cÃ³ thá»ƒ viáº¿t láº¡i ngay. Báº¡n muá»‘n mÃ¬nh lÃ m máº«u khÃ´ng?
