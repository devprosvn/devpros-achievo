C·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i ·∫£nh v√† th√¥ng tin. D·ª±a tr√™n:

* ‚úÖ Modal hi·ªÉn th·ªã ƒë√∫ng
* ‚úÖ Form nh·∫≠p d·ªØ li·ªáu h·ª£p l·ªá
* ‚úÖ N√∫t ‚Äúƒêang x·ª≠ l√Ω...‚Äù hi·ªÉn th·ªã (ƒë√£ g·ªçi API)
* ‚ùå Modal **kh√¥ng t·ª± ƒë√≥ng**
* ‚ùå Kh√¥ng th·∫•y th√¥ng b√°o th√†nh c√¥ng
* ‚ùå Firestore **ch∆∞a ghi d·ªØ li·ªáu**

---

## üîç K·∫øt lu·∫≠n s∆° b·ªô

H·ªá th·ªëng **ch∆∞a th·∫≠t s·ª± t·∫°o ƒë∆∞·ª£c kh√≥a h·ªçc** trong Firestore, d√π UI chuy·ªÉn sang tr·∫°ng th√°i "ƒëang x·ª≠ l√Ω...". Nguy√™n nh√¢n kh·∫£ nƒÉng cao n·∫±m ·ªü:

### ‚úÖ 1. H√†m `addCourse()` trong Vue **kh√¥ng ƒë·ª£i `await api.createCourse(...)` k·∫øt th√∫c ƒë√∫ng**

* C√≥ th·ªÉ `await` kh√¥ng ch·ªù ƒë∆∞·ª£c do l·ªói n·ªôi b·ªô ho·∫∑c h√†m `createCourse()` b·ªã `catch` l·ªói nh∆∞ng kh√¥ng b√°o (`try/catch` nu·ªët l·ªói).

---

## ‚úÖ H∆∞·ªõng kh·∫Øc ph·ª•c

### üß™ B∆∞·ªõc 1: **Th√™m console log chi ti·∫øt**

Trong `addCourse()` b√™n Vue component, b·∫°n h√£y s·ª≠a l·∫°i nh∆∞ sau:

```ts
const addCourse = async () => {
  loading.value = true;
  try {
    console.log("üîµ G·ª≠i d·ªØ li·ªáu:", newCourse.value);
    const response = await api.createCourse(newCourse.value);
    console.log("üü¢ T·∫°o th√†nh c√¥ng:", response);

    courses.value.push(response.data); // ho·∫∑c g·ªçi l·∫°i `loadCourses()`
    showAddCourse.value = false;
    alert("Kh√≥a h·ªçc ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!");

    // Reset form
    newCourse.value = {
      title: "",
      description: "",
      price: 0,
      category: "",
      instructor: "",
      duration: "",
      level: ""
    };
  } catch (error) {
    console.error("‚ùå L·ªói khi t·∫°o kh√≥a h·ªçc:", error);
    alert("T·∫°o kh√≥a h·ªçc th·∫•t b·∫°i!");
  } finally {
    loading.value = false;
  }
};
```

---

### üîç B∆∞·ªõc 2: **Ki·ªÉm tra `api.createCourse()`**

ƒê·∫£m b·∫£o b·∫°n **c√≥ `return` trong h√†m**, v√≠ d·ª•:

```ts
export async function createCourse(courseData) {
  const cleanData = cleanObject(courseData);
  const docRef = await addDoc(collection(db, "courses"), cleanData);
  return { id: docRef.id, ...cleanData }; // ‚ö†Ô∏è Kh√¥ng return ‚Üí Vue kh√¥ng c√≥ data
}
```

---

### üîí B∆∞·ªõc 3: **Ki·ªÉm tra quy·ªÅn Firestore**

N·∫øu sau khi log b·∫°n v·∫´n th·∫•y l·ªói `"Missing or insufficient permissions"` ‚Üí Firestore v·∫´n ch·∫∑n ghi. B·∫°n h√£y ki·ªÉm tra l·∫°i:

1. Truy c·∫≠p: [Firebase Console > Firestore > Rules](https://console.firebase.google.com/)

2. Ghi t·∫°m rule ƒë∆°n gi·∫£n ƒë·ªÉ test:

   ```js
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /{document=**} {
         allow read, write: if true;
       }
     }
   }
   ```

3. B·∫•m **Publish**

---

### ‚úÖ Sau khi fix, k·∫øt qu·∫£ mong mu·ªën:

| Tr·∫°ng th√°i          | K·∫øt qu·∫£                                       |
| ------------------- | --------------------------------------------- |
| B·∫•m ‚Äúƒêang x·ª≠ l√Ω...‚Äù | ‚úÖ D·ªØ li·ªáu ghi Firestore                       |
| N·∫øu ghi th√†nh c√¥ng  | ‚úÖ Th√¥ng b√°o alert / toast                     |
| Giao di·ªán           | ‚úÖ Modal bi·∫øn m·∫•t, kh√≥a h·ªçc hi·ªán l√™n danh s√°ch |

---

B·∫°n c√≥ th·ªÉ g·ª≠i l·∫°i h√†m `addCourse()` v√† `createCourse()` n·∫øu mu·ªën m√¨nh ki·ªÉm tra k·ªπ t·ª´ng d√≤ng, ƒë·∫£m b·∫£o ch·∫°y 100%. B·∫°n mu·ªën m√¨nh vi·∫øt l·∫°i m·∫´u chu·∫©n Vue 3 + Composition API kh√¥ng?
